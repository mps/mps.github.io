---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  date: Date;
  slug: string;
  link?: string;
}

const { title, date, slug, link } = Astro.props;

const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<BaseLayout title={title}>
  <article class="max-w-2xl mx-auto px-6 pb-12">
    <header class="mb-12">
      {link ? (
        <h1 class="text-2xl md:text-3xl font-semibold mb-2">
          <a
            href={link}
            class="no-underline hover:underline"
            target="_blank"
            rel="noopener noreferrer"
          >
            {title} →
          </a>
        </h1>
      ) : (
        <h1 class="text-2xl md:text-3xl font-semibold mb-2">{title}</h1>
      )}
      <time class="text-neutral-500 dark:text-neutral-400 text-sm">
        {formattedDate}
      </time>
    </header>

    <div class="prose prose-neutral dark:prose-invert">
      <slot />
    </div>

    <footer class="mt-16 pt-8 border-t border-neutral-200 dark:border-neutral-800">
      <a
        href="/blog"
        class="text-neutral-500 dark:text-neutral-400 text-sm no-underline hover:text-neutral-900 dark:hover:text-neutral-100 transition-colors"
      >
        ← back to all posts
      </a>
    </footer>
  </article>
</BaseLayout>
